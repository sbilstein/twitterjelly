SELECT token_counts.user, token_counts.token, token_counts.c, COUNT(token_user_mapping.user) as total_user_tokens
  FROM
    (SELECT t.user, t.token, t.c
      FROM
        (SELECT user, token, COUNT(*) as c
          FROM token_user_mapping
          WHERE token='seattle'
          GROUP BY user) as t
        ORDER BY t.user) as token_counts, token_user_mapping
  WHERE token_user_mapping.user = token_counts.user GROUP BY token_user_mapping.user